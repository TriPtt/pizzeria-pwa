name: Test Pipeline

on:
  push:
  pull_request:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: 18
      
      - name: Test Backend
        run: |
          echo "ğŸ” Checking backend..."
          if [ -d "back" ]; then
            cd back
            if [ -f "package.json" ]; then
              npm ci
              echo "âœ… Backend dependencies installed"
            else
              echo "âŒ No package.json in back/"
            fi
          else
            echo "âŒ No back/ directory found"
          fi
      
      - name: Test Frontend
        run: |
          echo "ğŸ” Checking frontend..."
          if [ -d "front" ]; then
            cd front
            if [ -f "package.json" ]; then
              npm ci
              npm run build
              echo "âœ… Frontend built successfully"
            else
              echo "âŒ No package.json in front/"
            fi
          else
            echo "âŒ No front/ directory found"
          fi
      
      - name: Show project structure
        run: |
          echo "ğŸ“ Project structure:"
          ls -la
